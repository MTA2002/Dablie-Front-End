<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Event Reservation</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link rel="stylesheet" href="../Header & Footer/header.css">
    <link rel="stylesheet" href="../Header & Footer/footer.css">
    <link rel="stylesheet" href="./eventreg.css">
    <link rel="icon" type="image/x-icon" href="../HomePage/images/Dablie_logo.png">
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.4.4/build/qrcode.min.js"></script>
</head>
<body>
    <header>
        <div class="logo">
            <a href="../index.html"><img src="../leadership page/assests/images/logo.png" alt="Dablie Foundation Logo"></a>
        </div>
        <div class="logo2">
            <a href="../index.html"><img src="../leadership page/assests/images/logo2.png" alt="Dablie Foundation Logo"></a>
        </div>
        <nav class="navbar">
            <ul>
                <li><a href="../About_us/about_us.html">About</a></li>
                <li><a href="#">Our Program <i class="fa fa-chevron-down"></i></a>
                    <ul class="dropdown">
                        <li><a href="../Leadership/Leadership.html">Leadership Program</a></li>
                        <li><a href="../Scholarship/Scholarship.html">Scholarship Program</a></li>
                        <li><a href="../Economic_Empowerment/economic.html">Economic Empowerment</a></li>
                        <li><a href="../Business/business.html">Dablie Business Forum</a></li>
                        <!-- <li><a href="../Partners_Directory/partners.html">Partners Directory</a></li> -->
                        <li><a href="../YouthPage/YouthPage.html">Youth Program</a></li>
                        <li><a href="../Other/other.html">Other Programs</a></li>
                    </ul>
                </li>
                <li><a href="../Events/events.html">Events</a></li>
                <li><a href="../Stories/stories.html">Stories</a></li>
            </ul>
        </nav>
        <div class="join-us-button">
            <a href="../Membership/membership.html">Join <img src="../HomePage/images/hands.png" alt="Hand Icon" class="icon"> </a>
        </div>
        <div class="donate-button">
            <a href="https://chapa.link/donation/view/DN-VH06Xca2dDRW">Donate <img src="../HomePage/images/heart.png" alt="heart Icon" class="icon-2"></a>
        </div>
        <div class="hamburger-menu-container">
            <div class="menu-wrapper">
                <p class="menu-btn"></p>
                <p class="menu-btn-middle"></p> <!-- Added middle line -->
            </div>
        </div>
    </header>
    <nav class="menu-overlay">
        <ul class="main-menu">
            <li><a href="../About_us/about_us.html">About</a></li>
            <li><a href="#" class="submenu-toggle">Our Programs<span class="icon-container marginit"><i class="fa-solid fa-chevron-right "></i></span></a></li>
            <li><a href="../Events/events.html">Events</a></li>
            <li><a href="../Stories/stories.html">Stories</a></li>
            <li class="buttons-container">
                <div class="join-us-button1"><a href="../Membership/membership.html">Join <img src="../HomePage/images/hands.png" alt="Hand Icon" class="icon"></a></div>
                <div class="button"><a href="https://chapa.link/donation/view/DN-VH06Xca2dDRW">Donate <img src="../HomePage/images/heart.png" alt="heart Icon" class="icon-2"> </a></div>
            </li>
        </ul>
        <ul class="submenu">
            <li><a href="#" class="back-to-main-menu"><i class="fa-solid fa-chevron-left style"></i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Our Programs</a></li>
            <li><a href="../Leadership/Leadership.html">Leadership Program</a></li>
            <li><a href="../Scholarship/Scholarship.html">Scholarship Program</a></li>
            <li><a href="../Economic_Empowerment/economic.html">Economic Empowerment</a></li>
            <li><a href="../Business/business.html">Dablie Business Forum</a></li>
            <!-- <li><a href="../Partners_Directory/partners.html">Partners Directory</a></li> -->
            <li><a href="../YouthPage/YouthPage.html">Youth Program</a></li>
            <li><a href="../Other/other.html">Other Programs</a></li>
        </ul>
        <div class="social-media">
            <a href="https://www.linkedin.com/company/dablie-foundation/?viewAsMember=true"><i class="fa-brands fa-linkedin-in"></i></a>
                <a href="#"><i class="fa-brands fa-x-twitter"></i></a>
                <a href="#"><i class="fa-brands fa-tiktok"></i></a>
                <a href="#"><i class="fa-brands fa-facebook-f"></i></a>
                <a href="#"><i class="fa-brands fa-telegram"></i></a>
        </div>
    </nav>
  <div class="container">
    <h1>Upcoming Events</h1>
    <div id="events" class="events">
      <!-- Events will be dynamically inserted here -->
    </div>
  </div>

  <!-- Reservation Modal -->
  <div id="modal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h2>Reserve a Spot</h2>
      <form id="reservationForm">
        <input type="hidden" id="eventId" name="eventId">
        <label for="name">Full Name:</label>
        <input type="text" id="name" name="name" required>
        <label for="phone">Phone Number:</label>
        <input type="tel" id="phone" name="phone" required>
        <label for="email">Email:</label>
        <input type="email" id="email" name="email" required>
        <button type="submit">Reserve</button>
      </form>
    </div>
  </div>

  <!-- Ticket Modal -->
  <div id="ticketModal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h2>Your Ticket</h2>
      <div id="ticketDetails"></div>
      <div id="qrcode"></div>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const events = [
        { id: 2, name: 'Art Exhibition', date: '2024-08-05', location: 'City Gallery', description: 'Experience the latest contemporary art from local and international artists.' },
        { id: 3, name: 'Tech Conference', date: '2024-08-10', location: 'Convention Center', description: 'A full-day event featuring keynote speakers, workshops, and networking opportunities.' }
      ];

      const eventsContainer = document.getElementById('events');

      events.forEach(event => {
        const eventElement = document.createElement('div');
        eventElement.className = 'event';
        eventElement.innerHTML = `
          <h2>${event.name}</h2>
          <p>Date: ${event.date}</p>
          <p>Location: ${event.location}</p>
          <p>${event.description}</p>
          <button onclick="openModal(${event.id})">Reserve</button>
        `;
        eventsContainer.appendChild(eventElement);
      });

      const modal = document.getElementById('modal');
      const ticketModal = document.getElementById('ticketModal');
      const closeBtns = document.querySelectorAll('.close');
      const reservationForm = document.getElementById('reservationForm');
      const ticketDetails = document.getElementById('ticketDetails');
      const qrcode = document.getElementById('qrcode');

      closeBtns.forEach(btn => {
        btn.onclick = () => {
          modal.style.display = 'none';
          ticketModal.style.display = 'none';
        };
      });

      window.onclick = event => {
        if (event.target === modal || event.target === ticketModal) {
          modal.style.display = 'none';
          ticketModal.style.display = 'none';
        }
      };

      reservationForm.onsubmit = event => {
        event.preventDefault();
        const eventId = document.getElementById('eventId').value;
        const name = document.getElementById('name').value;
        const phone = document.getElementById('phone').value;
        const email = document.getElementById('email').value;

        const selectedEvent = events.find(event => event.id == eventId);
        
        const ticketInfo = `
          Event: ${selectedEvent.name}<br>
          Date: ${selectedEvent.date}<br>
          Location: ${selectedEvent.location}<br>
          Name: ${name}<br>
          Phone: ${phone}<br>
          Email: ${email}
        `;

        ticketDetails.innerHTML = ticketInfo;
        
        // Generate QR code
        qrcode.innerHTML = '';
        QRCode.toCanvas(document.createElement('canvas'), ticketInfo, function (error, canvas) {
          if (error) console.error(error)
          qrcode.appendChild(canvas);
        });

        modal.style.display = 'none';
        ticketModal.style.display = 'flex';

        // Ideally, send ticket via email here
        // Example: sendEmail(name, email, ticketInfo);
      };
    });

    function openModal(eventId) {
      const modal = document.getElementById('modal');
      document.getElementById('eventId').value = eventId;
      modal.style.display = 'flex';
    }

    // Example function to send an email (requires a backend service)
    function sendEmail(name, email, ticketInfo) {
      // Implement email sending logic here
    }
  </script>

</body>
</html>